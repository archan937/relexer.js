if(typeof(reLexer)=="undefined"){reLexer=function(i,x,d){x||(x=Object.keys(i).pop());var m,j,z,C,b,h,y,l,t,B="_conj_",v="_named_",A="ƒ",D="ﬁ",g=function(f,n,c){if(f.indexOf(D)==-1){b[f]=[n,c]}},e=function(f){if(typeof(f)=="string"){f=new RegExp(f.replace(/[-\/\\^\$\*\+\?\.\(\)|\[\]\{\}]/g,"\\$&"))}var c=m.match(f);if(c&&c.index==0){m=m.slice(c[0].length);return c[0]}},s=function(u,c){var F=u.match(/(.+?)(>(\w+))?(&)?(\?)?(\/(\d+))?$/)||[],G=F[1],n=F[3],p=c||!!F[4],H=!!F[5],f=F[7]?parseInt(F[7],10):l,I=((G||"").match(/:(\w+)/)||[])[1],E;if(n||H||(I&&i[I])){if(G.match(/\|/)){G=reLexer.or.apply(null,G.split("|"))}else{G=G.replace(":",A)}E=w(G,n,p,f);if((E==l)&&H){E=""}}else{E=e(u)}return E},k=function(G,u){G[B]||(G[B]="and");var F=m,n=G[B],p,E,f,c=[];for(p=0;p<G.length;p++){E=G[p];f=w(E,null,u);if(f!=l){if(n=="and"){c.push(f)}else{return f}}else{if(n=="and"){m=F;return}}}if(c.length){return c}},w=function(H,Q,K,f){if(m==l){return}H=H||(A+x);var N=m,F=t,p=((H+"").indexOf(A)==0?H.slice(1):l),n=p==x,O=i[p],L=j&&j[p],c,E,u,I,P,J,M,G;if(t&&f&&t>f){return}if(!O){p=l;O=H}else{c=p+": "+m;if(arguments.length&&(E=b[c])){m=E[0];return E[1]}else{if(C[c]){return}}C[c]=!n}if(f){t=f}if(m.indexOf(D)==-1){y.push(m+" (#"+y.length+") "+(p?"(rule) "+p:O).toString())}if(arguments.length&&(E=b[">"+c])){m=E[0];u=E[1]}else{switch(O.constructor){case RegExp:u=e(O);break;case String:u=s(O,K);break;case Array:u=k(O,K);break}}t=F;if(p){C[c]=false}if(!n&&c){g(c,m,u)}if((u!=l)||(N!=m)){if(p||Q){if(!j||L){u=a(Q,K,p,O,u)}if(j&&L){I=function(){return L(z,this.captures,this)}.bind(u);u=K?I:I()}}if(j&&Q){u=[Q,u];u[v]=true}if(m!=l){if(!m.length){m=l}else{if(p&&f!=l&&m&&m.indexOf(D)==-1){P=m;J=u;M=">"+x+": "+D+P;m=D+P;b[M]=[P,u];G=w.apply(this,arguments);if(G==l){m=P;u=J}else{u=G}delete b[M]}}}if(!n&&c){g(c,m,u)}return u}},a=function(c,f,G,F,E){var n={},p={},H,u;if(c){n.name=c}if(f){n.lazy=f}if(G){n.rule=G}n.pattern=F;if(F[B]){n.conjunction=F[B]}if(j&&(E.constructor==Array)){for(u=0;u<E.length;u++){H=E[u];if(H&&H[v]){p[H[0]]=H[1]}}}n.captures=Object.keys(p).length?r(p):E;return n},r=function(c){return new Proxy(c,{get:function(f,n){var p=f[n];return(p&&p.constructor==Function)?p():p}})},q=function(){var f,c;try{t=l;f=w();if(m!=l){if(h==m){throw"Unable to match expression: "+JSON.stringify(m)}else{h=m;b[">"+x+": "+m]=[m,f];return q()}}else{return f}}catch(n){c=n.message&&n.message.match("Maximum call stack size exceeded")?-30:-15;console.error(n);console.error("Expressions backtrace:\n"+y.slice(c).reverse().join("\n"))}},o=function(f,c,n){f=f.trim();if(f){m=f;z=c;j=(arguments.length==1)?l:(n||d);C={};h=l;b={};y?y.splice(0):(y=[]);return q()}};this.tokenize=function(c){return o(c)};this.parse=function(n,c,f){return o(n,c,f)}};or=reLexer.or=function(){var a=[].slice.call(arguments);a._conj_="or";return a}};